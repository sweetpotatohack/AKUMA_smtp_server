# üí£ AKUMA SMTP Server - Ultimate Mail Server Deployment Script üí£

**–ê–≤—Ç–æ—Ä:** –§–µ–Ω—è (–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π —Ö–∞–∫–µ—Ä –∏ –≥—É—Ä—É –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤)  
**–í–µ—Ä—Å–∏—è:** 5.0 FINAL BOSS EDITION  
**Email:** dmitriyvisotskiydr15061991@gmail.com  

## üöÄ –û–ø–∏—Å–∞–Ω–∏–µ

–ü–æ–ª–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π SMTP/IMAP —Å–µ—Ä–≤–µ—Ä–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
- **Postfix** (SMTP —Å–µ—Ä–≤–µ—Ä)
- **Dovecot** (IMAP/POP3 —Å–µ—Ä–≤–µ—Ä) 
- **OpenDKIM** (—Ü–∏—Ñ—Ä–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∏)
- **Let's Encrypt** (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã)
- **UFW Firewall** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä—Ç–æ–≤)
- **SPF/DKIM/DMARC** –∑–∞–ø–∏—Å–∏ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–æ—Å—Ç–∞–≤–ª—è–µ–º–æ—Å—Ç–∏

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –°–∫–∞—á–∏–≤–∞–µ–º —Å–∫—Ä–∏–ø—Ç
git clone https://github.com/sweetpotatohack/AKUMA_smtp_server.git
cd AKUMA_smtp_server

# –î–µ–ª–∞–µ–º –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x smtp_ultimate_deploy.sh

# –ó–∞–ø—É—Å–∫–∞–µ–º –æ—Ç root
sudo ./smtp_ultimate_deploy.sh
```

## üîß –ß—Ç–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

- **SMTP –ø–æ—Ä—Ç—ã:** 25, 587 (STARTTLS), 465 (SSL/TLS)
- **IMAP –ø–æ—Ä—Ç—ã:** 143 (STARTTLS), 993 (SSL/TLS)  
- **POP3 –ø–æ—Ä—Ç—ã:** 110 (STARTTLS), 995 (SSL/TLS)
- **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** –æ—Ç Let's Encrypt —Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- **DKIM –ø–æ–¥–ø–∏—Å–∏** –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Å–ø–∞–º–∞
- **Firewall –ø—Ä–∞–≤–∏–ª–∞** –¥–ª—è –≤—Å–µ—Ö –Ω—É–∂–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤

## üìß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø–æ—á—Ç–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

### Thunderbird / Outlook / Mail.app

**–í—Ö–æ–¥—è—â–∏–π —Å–µ—Ä–≤–µ—Ä (IMAP):**
- –°–µ—Ä–≤–µ—Ä: `mail.yourdomain.com`
- –ü–æ—Ä—Ç: `993` (SSL/TLS) –∏–ª–∏ `143` (STARTTLS)
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ: SSL/TLS
- –õ–æ–≥–∏–Ω: `username` (–±–µ–∑ @–¥–æ–º–µ–Ω)

**–ò—Å—Ö–æ–¥—è—â–∏–π —Å–µ—Ä–≤–µ—Ä (SMTP):**
- –°–µ—Ä–≤–µ—Ä: `mail.yourdomain.com`
- –ü–æ—Ä—Ç: `465` (SSL/TLS) –∏–ª–∏ `587` (STARTTLS)
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ: SSL/TLS
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: –î–∞
- –õ–æ–≥–∏–Ω: `username` (–±–µ–∑ @–¥–æ–º–µ–Ω)

## üéØ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Gophish

```
SMTP Host: mail.yourdomain.com
SMTP Port: 465 (SSL/TLS) –∏–ª–∏ 587 (STARTTLS)
Username: username@yourdomain.com
Password: [–≤–∞—à –ø–∞—Ä–æ–ª—å]
Encryption: SSL/TLS
From Address: username@yourdomain.com
```

## üåê –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ DNS –∑–∞–ø–∏—Å–∏

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª `/root/DNS_RECORDS_yourdomain.txt` —Å –ø–æ–ª–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏. –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–ø–∏—Å–∏:

```dns
# A-–∑–∞–ø–∏—Å—å
mail.yourdomain.com.    IN A     YOUR_SERVER_IP

# MX-–∑–∞–ø–∏—Å—å  
yourdomain.com.         IN MX    10 mail.yourdomain.com

# SPF-–∑–∞–ø–∏—Å—å
yourdomain.com.         IN TXT   "v=spf1 mx a:mail.yourdomain.com ~all"

# DKIM-–∑–∞–ø–∏—Å—å (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º)
default._domainkey.yourdomain.com. IN TXT "v=DKIM1; k=rsa; p=..."

# DMARC-–∑–∞–ø–∏—Å—å
_dmarc.yourdomain.com.  IN TXT   "v=DMARC1; p=quarantine; rua=mailto:dmarc@yourdomain.com"
```

## üõ°Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **OS:** Ubuntu 20.04+ / Debian 11+
- **RAM:** –ú–∏–Ω–∏–º—É–º 1GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2GB+)
- **–ü—Ä–∞–≤–∞:** root –¥–æ—Å—Ç—É–ø
- **–î–æ–º–µ–Ω:** –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ–º–µ–Ω —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ DNS
- **–ü–æ—Ä—Ç—ã:** 25, 80, 143, 443, 465, 587, 993 –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
systemctl status postfix dovecot opendkim

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
netstat -tlnp | grep -E "(25|587|465|143|993)"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
openssl s_client -connect mail.yourdomain.com:465
openssl s_client -connect mail.yourdomain.com:993

# –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS –∑–∞–ø–∏—Å–µ–π
dig +short mail.yourdomain.com A
dig +short yourdomain.com MX
dig +short yourdomain.com TXT | grep spf1
dig +short default._domainkey.yourdomain.com TXT
```

## üìä –û–Ω–ª–∞–π–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

1. **MX Toolbox:** https://mxtoolbox.com/
2. **DKIM Validator:** https://dkimvalidator.com/
3. **SPF Record Check:** https://www.kitterman.com/spf/validate.html
4. **Mail Tester:** https://www.mail-tester.com/

## üîß –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

```bash
# –õ–æ–≥–∏ Postfix
tail -f /var/log/mail.log

# –õ–æ–≥–∏ Dovecot  
tail -f /var/log/dovecot.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Postfix
postfix check

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Dovecot
dovecot -n

# –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å—å–º–∞
echo "Test email" | mail -s "Test" test@gmail.com
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
AKUMA_smtp_server/
‚îú‚îÄ‚îÄ smtp_ultimate_deploy.sh     # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏
‚îú‚îÄ‚îÄ mail_setup_improved.py      # Python –≤–µ—Ä—Å–∏—è (—É—Å—Ç–∞—Ä–µ–≤—à–∞—è)
‚îú‚îÄ‚îÄ setup_mail.sh              # –ü—Ä–æ—Å—Ç–∞—è –≤–µ—Ä—Å–∏—è (—É—Å—Ç–∞—Ä–µ–≤—à–∞—è)
‚îú‚îÄ‚îÄ README.md                   # –≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
‚îú‚îÄ‚îÄ EXAMPLES.md                 # –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
‚îú‚îÄ‚îÄ dns_records_example.txt     # –ü—Ä–∏–º–µ—Ä DNS –∑–∞–ø–∏—Å–µ–π
‚îî‚îÄ‚îÄ requirements.txt            # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

1. **DNS –∑–∞–ø–∏—Å–∏** –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è 24-48 —á–∞—Å–æ–≤
2. **PTR –∑–∞–ø–∏—Å—å** –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ —É —Ö–æ—Å—Ç–∏–Ω–≥-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
3. **–°–Ω–∞—á–∞–ª–∞** –¥–æ–±–∞–≤—å—Ç–µ A –∏ MX –∑–∞–ø–∏—Å–∏, –ø–æ—Ç–æ–º –∑–∞—â–∏—Ç–Ω—ã–µ (SPF/DKIM/DMARC)
4. **–ë–µ–∑ SPF/DKIM/DMARC** –ø–∏—Å—å–º–∞ –ø–æ–ø–∞–¥—É—Ç –≤ —Å–ø–∞–º
5. **Backup** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `/var/log/mail.log` –∏ `/var/log/dovecot.log`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ DNS –∑–∞–ø–∏—Å–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–∏–ª–∏—Å—å
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –ø–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã –∏ –¥–æ—Å—Ç—É–ø–Ω—ã
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–Ω–ª–∞–π–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ, –Ω–æ —Å —É–º–æ–º!

## üéâ –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–ö–∞–∫ –≥–æ–≤–æ—Ä–∏–ª –º–æ–π –¥–µ–¥: *"–•–æ—Ä–æ—à–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–æ—á—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä - —ç—Ç–æ –∫–∞–∫ —à–≤–µ–π—Ü–∞—Ä—Å–∫–∏–µ —á–∞—Å—ã: —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ—á–Ω–æ –∏ –Ω–∏–∫–æ–≥–æ –Ω–µ –ø–æ–¥–≤–æ–¥–∏—Ç!"*

---

**–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –∏ –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∫–æ—Ñ–µ–∏–Ω–∞**
